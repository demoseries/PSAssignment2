<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>All Sales Data</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css"
    />
    <style>
      .top-performer {
        color: var(--pico-color-green-500);
        font-weight: bold;
      }
      .medium-performer {
        color: var(--pico-color-blue-500);
        font-weight: bold;
      }
      .low-performer {
        color: var(--pico-color-orange-500);
        font-weight: bold;
      }
      .best-performer {
        background-color: var(--pico-color-green-50);
      }
      .currency {
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <header class="container">
      <nav>
        <ul>
          <li><a href="index.html">Sales Analysis</a></li>
          <li><a href="all-sales-data.html">All Sales Data</a></li>
        </ul>
      </nav>
      <hgroup>
        <h1>All Sales Data</h1>
        <p>Complete sales records using for loop templating</p>
      </hgroup>
    </header>

    <main class="container">
      <section>
        <h2>Sales Team Performance</h2>
        <div class="overflow-auto"></div>
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Location</th>
              <th>Q1 Sales</th>
              <th>Q2 Sales</th>
              <th>Q3 Sales</th>
              <th>Q4 Sales</th>
              <th>Total Sales</th>
              <th>Average Sales</th>
              <th>Performance Grade</th>
            </tr>
          </thead>
          <tbody id="sales-data"></tbody>
        </table>
      </section>
    </main>

    <footer class="container">
      <small>Learning HTML templating with sales data</small>
    </footer>

    <script>
      const salesData = [
        {
          name: "Rajesh",
          location: "Mumbai",
          q1Sales: 120000,
          q2Sales: 145000,
          q3Sales: 130000,
          q4Sales: 155000,
        },
        {
          name: "Sneha",
          location: "Delhi",
          q1Sales: 90000,
          q2Sales: 110000,
          q3Sales: 95000,
          q4Sales: 120000,
        },
        {
          name: "Arun",
          location: "Chennai",
          q1Sales: 100000,
          q2Sales: 125000,
          q3Sales: 115000,
          q4Sales: 135000,
        },
        {
          name: "Kavita",
          location: "Kolkata",
          q1Sales: 85000,
          q2Sales: 95000,
          q3Sales: 138000,
          q4Sales: 255000,
        },
        {
          name: "Sanjay",
          location: "Mumbai",
          q1Sales: 110000,
          q2Sales: 135000,
          q3Sales: 120000,
          q4Sales: 140000,
        },
        {
          name: "Divya",
          location: "Chennai",
          q1Sales: 95000,
          q2Sales: 120000,
          q3Sales: 110000,
          q4Sales: 130000,
        },
      ];

      function calculateTotalAndAverages() {
        for (let i = 0; i < salesData.length; i++) {
          const personData = salesData[i];
          const yearlySales =
            personData.q1Sales +
            personData.q2Sales +
            personData.q3Sales +
            personData.q4Sales;
          const averageSales = yearlySales / 4;
          personData.totalSales = yearlySales;
          personData.avgSales = averageSales;
        }
        // console.log(salesData);
      }
      calculateTotalAndAverages();
      function getGrade(avgSales) {
        {
          if (avgSales > 140000) return "Top Performer";
          if (avgSales > 120000 || avgSales < 14000) return "Medium Performer";
          return "Low Performer";
        }
      }

      function renderData() {
        const tbody = document.getElementById("sales-data");
        let tableHtml = "";
        for (let i = 0; i < salesData.length; i++) {
          const sales = salesData[i];
          const grade = getGrade(sales.avgSales);
          tableHtml += `<tr>
            <td>${sales.name}</td>
            <td>${sales.location}</td>
             <td>${sales.q1Sales}</td>
              <td>${sales.q2Sales}</td>
               <td>${sales.q3Sales}</td>
                <td>${sales.q4Sales}</td>
                  <td>${sales.totalSales}</td>
                    <td>${sales.avgSales}</td>
                      <td>${grade}</td>



            </tr>`;
        }
        tbody.innerHTML = tableHtml;
      }
      function tableView() {
        renderData();
      }
      document.addEventListener("DOMContentLoaded", tableView);
    </script>
  </body>
</html>
